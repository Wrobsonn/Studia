#ifndef F_CPU
#define F_CPU 1000000UL
#endif
#include <avr/io.h>
#include <util/delay.h>
int main(void)
{
	while (1)
	{
		char c [] = {
			0b11000000, // 0
			0b11111001, // 1
			0b10100100, // 2
			0b10110000, // 3
			0b10011001, // 4
			0b10010010, // 5
			0b10000010, // 6
			0b11111000, // 7
			0b10000000, // 8
			0b10010000, // 9
			0b10001000, // A
			0b00000000, // B
			0b11000110, // C
			0b10000110, // E
			0b10001110, // F
			0b11000000, // D

		};
		char w [] = {
			0b00001110,
			0b00001101,
			0b00001011,
			0b00000111
		};
		char p [] = {
			0b11110111,
			0b11111011,
			0b11111101,
			0b11111110
		};
		DDRD = 0b11111111;
		DDRB = 0b11111111;
		DDRA = 0b00001111;
		while(1){
			for (int i = 0; i < 4; i++)
			{
				PORTA = p[i];
				switch(PINA){
					case 0b01110111:
					PORTD = w[0];
					PORTB = c[1];
					_delay_ms(5);
					break;
					case 0b10110111:
					PORTD = w[0];
					PORTB = c[4];
					_delay_ms(5);
					break;
					case 0b11010111:
					PORTD = w[0];
					PORTB = c[7];
					_delay_ms(5);
					break;
					case 0b11100111:
					PORTD = w[0];
					PORTB = c[13];
					_delay_ms(5);
					break;
					case 0b01111011:
					PORTD = w[0];
					PORTB = c[2];
					_delay_ms(5);
					break;
					case 0b10111011:
					PORTD = w[0];
					PORTB = c[5];
					_delay_ms(5);
					break;
					case 0b11011011:
					PORTD = w[0];
					PORTB = c[8];
					_delay_ms(5);
					break;
					case 0b11101011:
					PORTD = w[0];
					PORTB = c[0];
					_delay_ms(5);
					break;
					case 0b01111101:
					PORTD = w[0];
					PORTB = c[3];
					_delay_ms(5);
					break;
					case 0b10111101:
					PORTD = w[0];
					PORTB = c[6];
					_delay_ms(5);
					break;
					case 0b11011101:
					PORTD = w[0];
					PORTB = c[9];
					_delay_ms(5);
					break;
					case 0b11101101:
					PORTD = w[0];
					PORTB = c[14];
					_delay_ms(5);
					break;
					case 0b01111110:
					PORTD = w[0];
					PORTB = c[10];
					_delay_ms(5);
					break;
					case 0b10111110:
					PORTD = w[0];
					PORTB = c[11];
					_delay_ms(5);
					break;
					case 0b11011110:
					PORTD = w[0];
					PORTB = c[12];
					_delay_ms(5);
					break;
					case 0b11101110:
					PORTD = w[0];
					PORTB = c[15];
					_delay_ms(5);
					break;
					default:
					PORTD = w[0];
					PORTB = 0b11111111;
					_delay_ms(5);
					break;
				}
			}
		}
	}
}